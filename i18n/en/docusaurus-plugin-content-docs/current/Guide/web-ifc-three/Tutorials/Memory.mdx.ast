{"type":"root","children":[{"type":"yaml","value":"title: üß† Memory\r\nsidebar_position: 5","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":4,"column":4,"offset":47}}},{"type":"mdxjsEsm","value":"import { IfcCard } from \"../../../../src/components/Card/InfoCard\";\r\nimport { IfcAlert } from \"../../../../src/components/Alert/Alert\";\r\nimport { Scene } from \"../../../../src/components/Scene/Scene\";","position":{"start":{"line":6,"column":1,"offset":51},"end":{"line":8,"column":64,"offset":251}},"data":{"estree":{"type":"Program","start":51,"end":251,"body":[{"type":"ImportDeclaration","start":51,"end":118,"specifiers":[{"type":"ImportSpecifier","start":60,"end":67,"imported":{"type":"Identifier","start":111,"end":118,"name":"IfcCard","loc":{"start":{"line":6,"column":60,"offset":111},"end":{"line":6,"column":67,"offset":118}},"range":[111,118]},"local":{"type":"Identifier","start":111,"end":118,"name":"IfcCard","loc":{"start":{"line":6,"column":60,"offset":111},"end":{"line":6,"column":67,"offset":118}},"range":[111,118]},"loc":{"start":{"line":6,"column":9,"offset":60},"end":{"line":6,"column":16,"offset":67}},"range":[60,67]}],"source":{"type":"Literal","start":75,"end":117,"value":"../../../../src/components/Card/InfoCard","raw":"\"../../../../src/components/Card/InfoCard\"","loc":{"start":{"line":6,"column":24,"offset":75},"end":{"line":6,"column":66,"offset":117}},"range":[75,117]},"loc":{"start":{"line":6,"column":0,"offset":51},"end":{"line":6,"column":67,"offset":118}},"range":[51,118]},{"type":"ImportDeclaration","start":120,"end":186,"specifiers":[{"type":"ImportSpecifier","start":129,"end":137,"imported":{"type":"Identifier","start":180,"end":188,"name":"IfcAlert","loc":{"start":{"line":7,"column":60,"offset":180},"end":{"line":8,"column":0,"offset":188}},"range":[180,188]},"local":{"type":"Identifier","start":180,"end":188,"name":"IfcAlert","loc":{"start":{"line":7,"column":60,"offset":180},"end":{"line":8,"column":0,"offset":188}},"range":[180,188]},"loc":{"start":{"line":7,"column":9,"offset":129},"end":{"line":7,"column":17,"offset":137}},"range":[129,137]}],"source":{"type":"Literal","start":145,"end":185,"value":"../../../../src/components/Alert/Alert","raw":"\"../../../../src/components/Alert/Alert\"","loc":{"start":{"line":7,"column":25,"offset":145},"end":{"line":7,"column":65,"offset":185}},"range":[145,185]},"loc":{"start":{"line":7,"column":0,"offset":120},"end":{"line":7,"column":66,"offset":186}},"range":[120,186]},{"type":"ImportDeclaration","start":188,"end":251,"specifiers":[{"type":"ImportSpecifier","start":197,"end":202,"imported":{"type":"Identifier","start":248,"end":251,"name":"Scene","loc":{"start":{"line":8,"column":60,"offset":248},"end":{"line":8,"column":63,"offset":251}},"range":[248,251]},"local":{"type":"Identifier","start":248,"end":251,"name":"Scene","loc":{"start":{"line":8,"column":60,"offset":248},"end":{"line":8,"column":63,"offset":251}},"range":[248,251]},"loc":{"start":{"line":8,"column":9,"offset":197},"end":{"line":8,"column":14,"offset":202}},"range":[197,202]}],"source":{"type":"Literal","start":210,"end":250,"value":"../../../../src/components/Scene/Scene","raw":"\"../../../../src/components/Scene/Scene\"","loc":{"start":{"line":8,"column":22,"offset":210},"end":{"line":8,"column":62,"offset":250}},"range":[210,250]},"loc":{"start":{"line":8,"column":0,"offset":188},"end":{"line":8,"column":63,"offset":251}},"range":[188,251]}],"sourceType":"module","comments":[],"loc":{"start":{"line":6,"column":0,"offset":51},"end":{"line":8,"column":63,"offset":251}},"range":[51,251]}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Introduction","position":{"start":{"line":10,"column":4,"offset":258},"end":{"line":10,"column":16,"offset":270}}}],"position":{"start":{"line":10,"column":1,"offset":255},"end":{"line":10,"column":16,"offset":270}}},{"type":"paragraph","children":[{"type":"text","value":"üì≠üì´\r\nOn many occasions we will want to create applications that are able to ","position":{"start":{"line":12,"column":1,"offset":274},"end":{"line":13,"column":72,"offset":351}}},{"type":"strong","children":[{"type":"text","value":"open and close BIM viewers","position":{"start":{"line":13,"column":74,"offset":353},"end":{"line":13,"column":100,"offset":379}}}],"position":{"start":{"line":13,"column":72,"offset":351},"end":{"line":13,"column":102,"offset":381}}},{"type":"text","value":". Although this may seem obvious, there is a problem: ","position":{"start":{"line":13,"column":102,"offset":381},"end":{"line":13,"column":156,"offset":435}}},{"type":"strong","children":[{"type":"text","value":"memory management","position":{"start":{"line":13,"column":158,"offset":437},"end":{"line":13,"column":175,"offset":454}}}],"position":{"start":{"line":13,"column":156,"offset":435},"end":{"line":13,"column":177,"offset":456}}},{"type":"text","value":".","position":{"start":{"line":13,"column":177,"offset":456},"end":{"line":13,"column":178,"offset":457}}}],"position":{"start":{"line":12,"column":1,"offset":274},"end":{"line":13,"column":178,"offset":457}}},{"type":"paragraph","children":[{"type":"text","value":"ü§î\r\nNow many will be scratching their heads, since memory management is not a common issue in web applications. JavaScript and other modern languages have ","position":{"start":{"line":15,"column":1,"offset":461},"end":{"line":16,"column":152,"offset":616}}},{"type":"strong","children":[{"type":"text","value":"automatic memory management / garbage collector","position":{"start":{"line":16,"column":154,"offset":618},"end":{"line":16,"column":201,"offset":665}}}],"position":{"start":{"line":16,"column":152,"offset":616},"end":{"line":16,"column":203,"offset":667}}},{"type":"text","value":", so the programmer doesn't have to worry about freeing up objects and arrays.","position":{"start":{"line":16,"column":203,"offset":667},"end":{"line":16,"column":281,"offset":745}}}],"position":{"start":{"line":15,"column":1,"offset":461},"end":{"line":16,"column":281,"offset":745}}},{"type":"paragraph","children":[{"type":"text","value":"‚úçü§ñ‚ùì\r\nHowever, when working with Three.js, data going to the graphics card (e.g. buffers) is ","position":{"start":{"line":18,"column":1,"offset":749},"end":{"line":19,"column":88,"offset":842}}},{"type":"strong","children":[{"type":"text","value":"not affected by this automatic memory management","position":{"start":{"line":19,"column":90,"offset":844},"end":{"line":19,"column":138,"offset":892}}}],"position":{"start":{"line":19,"column":88,"offset":842},"end":{"line":19,"column":140,"offset":894}}},{"type":"text","value":".","position":{"start":{"line":19,"column":140,"offset":894},"end":{"line":19,"column":141,"offset":895}}}],"position":{"start":{"line":18,"column":1,"offset":749},"end":{"line":19,"column":141,"offset":895}}},{"type":"paragraph","children":[{"type":"text","value":"ü§ï\r\nThat means that if we close a viewer made with Three.js (with or without IFC.js), we will create a üí¶ ","position":{"start":{"line":21,"column":1,"offset":899},"end":{"line":22,"column":103,"offset":1005}}},{"type":"strong","children":[{"type":"text","value":"memory leak","position":{"start":{"line":22,"column":105,"offset":1007},"end":{"line":22,"column":116,"offset":1018}}}],"position":{"start":{"line":22,"column":103,"offset":1005},"end":{"line":22,"column":118,"offset":1020}}},{"type":"text","value":" üí¶. That is to say, we are blocking a part of the user's RAM memory. If the leak becomes too big, the application will become slower and slower and may ","position":{"start":{"line":22,"column":118,"offset":1020},"end":{"line":22,"column":271,"offset":1173}}},{"type":"strong","children":[{"type":"text","value":"crash","position":{"start":{"line":22,"column":273,"offset":1175},"end":{"line":22,"column":278,"offset":1180}}}],"position":{"start":{"line":22,"column":271,"offset":1173},"end":{"line":22,"column":280,"offset":1182}}},{"type":"text","value":".","position":{"start":{"line":22,"column":280,"offset":1182},"end":{"line":22,"column":281,"offset":1183}}}],"position":{"start":{"line":21,"column":1,"offset":899},"end":{"line":22,"column":281,"offset":1183}}},{"type":"mdxJsxFlowElement","name":"IfcAlert","attributes":[],"children":[{"type":"paragraph","children":[{"type":"text","value":"You can find more information about this topic","position":{"start":{"line":25,"column":3,"offset":1201},"end":{"line":25,"column":49,"offset":1247}}},{"type":"mdxTextExpression","value":"\" \"","position":{"start":{"line":25,"column":49,"offset":1247},"end":{"line":25,"column":54,"offset":1252}},"data":{"estree":{"type":"Program","start":1248,"end":1251,"body":[{"type":"ExpressionStatement","expression":{"type":"Literal","start":1248,"end":1251,"value":" ","raw":"\" \"","loc":{"start":{"line":25,"column":49,"offset":1248},"end":{"line":25,"column":52,"offset":1251}},"range":[1248,1251]},"start":1248,"end":1251,"loc":{"start":{"line":25,"column":49,"offset":1248},"end":{"line":25,"column":52,"offset":1251}},"range":[1248,1251]}],"sourceType":"module","comments":[],"loc":{"start":{"line":25,"column":49,"offset":1248},"end":{"line":25,"column":52,"offset":1251}},"range":[1248,1251]}}}],"position":{"start":{"line":25,"column":3,"offset":1201},"end":{"line":25,"column":54,"offset":1252}}},{"type":"mdxJsxFlowElement","name":"a","attributes":[{"type":"mdxJsxAttribute","name":"href","value":"https://threejs.org/docs/#manual/en/introduction/How-to-dispose-of-objects"}],"children":[{"type":"paragraph","children":[{"type":"text","value":"here","position":{"start":{"line":27,"column":5,"offset":1347},"end":{"line":27,"column":9,"offset":1351}}}],"position":{"start":{"line":27,"column":5,"offset":1347},"end":{"line":27,"column":9,"offset":1351}}}],"position":{"start":{"line":26,"column":3,"offset":1256},"end":{"line":28,"column":7,"offset":1359}}},{"type":"paragraph","children":[{"type":"text","value":".","position":{"start":{"line":29,"column":3,"offset":1363},"end":{"line":29,"column":4,"offset":1364}}}],"position":{"start":{"line":29,"column":3,"offset":1363},"end":{"line":29,"column":4,"offset":1364}}}],"position":{"start":{"line":24,"column":1,"offset":1187},"end":{"line":30,"column":12,"offset":1377}}},{"type":"paragraph","children":[{"type":"text","value":"üöÄ\r\nThis becomes especially critical if we are creating a ","position":{"start":{"line":32,"column":1,"offset":1381},"end":{"line":33,"column":55,"offset":1439}}},{"type":"strong","children":[{"type":"text","value":"SPA","position":{"start":{"line":33,"column":57,"offset":1441},"end":{"line":33,"column":60,"offset":1444}}}],"position":{"start":{"line":33,"column":55,"offset":1439},"end":{"line":33,"column":62,"offset":1446}}},{"type":"text","value":" (","position":{"start":{"line":33,"column":62,"offset":1446},"end":{"line":33,"column":64,"offset":1448}}},{"type":"strong","children":[{"type":"text","value":"Single Page Application","position":{"start":{"line":33,"column":66,"offset":1450},"end":{"line":33,"column":89,"offset":1473}}}],"position":{"start":{"line":33,"column":64,"offset":1448},"end":{"line":33,"column":91,"offset":1475}}},{"type":"text","value":"), for example, using frameworks and libraries such as **React or **Angular**. In these cases the web application is never reloaded, and the memory leak accumulates.","position":{"start":{"line":33,"column":91,"offset":1475},"end":{"line":33,"column":258,"offset":1642}}}],"position":{"start":{"line":32,"column":1,"offset":1381},"end":{"line":33,"column":258,"offset":1642}}},{"type":"paragraph","children":[{"type":"text","value":"Fortunately, IFC.js has taken this into account and allows you to ","position":{"start":{"line":35,"column":1,"offset":1646},"end":{"line":35,"column":67,"offset":1712}}},{"type":"strong","children":[{"type":"text","value":"release the used memory very easily","position":{"start":{"line":35,"column":69,"offset":1714},"end":{"line":35,"column":104,"offset":1749}}}],"position":{"start":{"line":35,"column":67,"offset":1712},"end":{"line":35,"column":106,"offset":1751}}},{"type":"text","value":". Let's see how. üëá","position":{"start":{"line":35,"column":106,"offset":1751},"end":{"line":35,"column":125,"offset":1770}}}],"position":{"start":{"line":35,"column":1,"offset":1646},"end":{"line":35,"column":125,"offset":1770}}},{"type":"mdxJsxFlowElement","name":"IfcCard","attributes":[],"children":[{"type":"paragraph","children":[{"type":"text","value":"You can find the full example of this tutorial","position":{"start":{"line":38,"column":3,"offset":1787},"end":{"line":38,"column":49,"offset":1833}}},{"type":"mdxTextExpression","value":"\" \"","position":{"start":{"line":38,"column":49,"offset":1833},"end":{"line":38,"column":54,"offset":1838}},"data":{"estree":{"type":"Program","start":1834,"end":1837,"body":[{"type":"ExpressionStatement","expression":{"type":"Literal","start":1834,"end":1837,"value":" ","raw":"\" \"","loc":{"start":{"line":38,"column":49,"offset":1834},"end":{"line":38,"column":52,"offset":1837}},"range":[1834,1837]},"start":1834,"end":1837,"loc":{"start":{"line":38,"column":49,"offset":1834},"end":{"line":38,"column":52,"offset":1837}},"range":[1834,1837]}],"sourceType":"module","comments":[],"loc":{"start":{"line":38,"column":49,"offset":1834},"end":{"line":38,"column":52,"offset":1837}},"range":[1834,1837]}}}],"position":{"start":{"line":38,"column":3,"offset":1787},"end":{"line":38,"column":54,"offset":1838}}},{"type":"mdxJsxFlowElement","name":"a","attributes":[{"type":"mdxJsxAttribute","name":"href","value":"https://github.com/IFCjs/hello-world/tree/main/examples/web-ifc-three/memory"}],"children":[{"type":"paragraph","children":[{"type":"text","value":"here","position":{"start":{"line":40,"column":5,"offset":1935},"end":{"line":40,"column":9,"offset":1939}}}],"position":{"start":{"line":40,"column":5,"offset":1935},"end":{"line":40,"column":9,"offset":1939}}}],"position":{"start":{"line":39,"column":3,"offset":1842},"end":{"line":41,"column":7,"offset":1947}}},{"type":"paragraph","children":[{"type":"text","value":".","position":{"start":{"line":42,"column":3,"offset":1951},"end":{"line":42,"column":4,"offset":1952}}}],"position":{"start":{"line":42,"column":3,"offset":1951},"end":{"line":42,"column":4,"offset":1952}}}],"position":{"start":{"line":37,"column":1,"offset":1774},"end":{"line":43,"column":11,"offset":1964}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"How to do it","position":{"start":{"line":45,"column":4,"offset":1971},"end":{"line":45,"column":16,"offset":1983}}}],"position":{"start":{"line":45,"column":1,"offset":1968},"end":{"line":45,"column":16,"offset":1983}}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Monitoring the memory","position":{"start":{"line":47,"column":5,"offset":1991},"end":{"line":47,"column":26,"offset":2012}}}],"position":{"start":{"line":47,"column":1,"offset":1987},"end":{"line":47,"column":26,"offset":2012}}},{"type":"paragraph","children":[{"type":"text","value":"üëÄ\r\nThe first question you probably have if you haven't worked much with Three.js optimized scenes is ","position":{"start":{"line":49,"column":1,"offset":2016},"end":{"line":50,"column":99,"offset":2118}}},{"type":"strong","children":[{"type":"text","value":"how to see how much memory your application consumes","position":{"start":{"line":50,"column":101,"offset":2120},"end":{"line":50,"column":153,"offset":2172}}}],"position":{"start":{"line":50,"column":99,"offset":2118},"end":{"line":50,"column":155,"offset":2174}}},{"type":"text","value":". Otherwise, it is impossible to detect memory leaks.","position":{"start":{"line":50,"column":155,"offset":2174},"end":{"line":50,"column":208,"offset":2227}}}],"position":{"start":{"line":49,"column":1,"offset":2016},"end":{"line":50,"column":208,"offset":2227}}},{"type":"paragraph","children":[{"type":"text","value":"üåç\r\nThere are several ways to do this. The first is to use the ","position":{"start":{"line":52,"column":1,"offset":2231},"end":{"line":53,"column":60,"offset":2294}}},{"type":"strong","children":[{"type":"text","value":"developer tools","position":{"start":{"line":53,"column":62,"offset":2296},"end":{"line":53,"column":77,"offset":2311}}}],"position":{"start":{"line":53,"column":60,"offset":2294},"end":{"line":53,"column":79,"offset":2313}}},{"type":"text","value":" of the browser you are using. For example, in Google Chrome there is a section called \"Memory\" where you can take snapshots and see how much memory the current tab is consuming.","position":{"start":{"line":53,"column":79,"offset":2313},"end":{"line":53,"column":257,"offset":2491}}}],"position":{"start":{"line":52,"column":1,"offset":2231},"end":{"line":53,"column":257,"offset":2491}}},{"type":"paragraph","children":[{"type":"text","value":"ü§ñ\r\nHowever, a more convenient way is to use the library ","position":{"start":{"line":55,"column":1,"offset":2495},"end":{"line":56,"column":54,"offset":2552}}},{"type":"link","title":null,"url":"https://github.com/mrdoob/stats.js/","children":[{"type":"text","value":"stats.js","position":{"start":{"line":56,"column":55,"offset":2553},"end":{"line":56,"column":63,"offset":2561}}}],"position":{"start":{"line":56,"column":54,"offset":2552},"end":{"line":56,"column":101,"offset":2599}}},{"type":"text","value":". This library allows to ","position":{"start":{"line":56,"column":101,"offset":2599},"end":{"line":56,"column":126,"offset":2624}}},{"type":"strong","children":[{"type":"text","value":"monitor the performance and memory","position":{"start":{"line":56,"column":128,"offset":2626},"end":{"line":56,"column":162,"offset":2660}}}],"position":{"start":{"line":56,"column":126,"offset":2624},"end":{"line":56,"column":164,"offset":2662}}},{"type":"text","value":" of a Three.js application. It can be installed with ","position":{"start":{"line":56,"column":164,"offset":2662},"end":{"line":56,"column":217,"offset":2715}}},{"type":"inlineCode","value":"npm i stats.js","position":{"start":{"line":56,"column":217,"offset":2715},"end":{"line":56,"column":233,"offset":2731}}},{"type":"text","value":" and can be used as follows:","position":{"start":{"line":56,"column":233,"offset":2731},"end":{"line":56,"column":261,"offset":2759}}}],"position":{"start":{"line":55,"column":1,"offset":2495},"end":{"line":56,"column":261,"offset":2759}}},{"type":"code","lang":"js","meta":null,"value":"// Stats\r\nconst stats = new Stats();\r\nstats.showPanel(2);\r\ndocument.body.append(stats.dom);\r\n\r\n// Animation loop\r\nconst animate = () => {\r\n  stats.begin();\r\n\r\n  // Update other stuff\r\n  stats.end();\r\n  requestAnimationFrame(animate);\r\n};\r\n\r\nanimate();","position":{"start":{"line":58,"column":1,"offset":2763},"end":{"line":74,"column":4,"offset":3026}}},{"type":"paragraph","children":[{"type":"text","value":"üìã\r\nThis will bring up the ","position":{"start":{"line":76,"column":1,"offset":3030},"end":{"line":77,"column":24,"offset":3057}}},{"type":"strong","children":[{"type":"text","value":"scene statistics during execution","position":{"start":{"line":77,"column":26,"offset":3059},"end":{"line":77,"column":59,"offset":3092}}}],"position":{"start":{"line":77,"column":24,"offset":3057},"end":{"line":77,"column":61,"offset":3094}}},{"type":"text","value":". By clicking on them we can toggle between performance and memory usage of the app.","position":{"start":{"line":77,"column":61,"offset":3094},"end":{"line":77,"column":145,"offset":3178}}}],"position":{"start":{"line":76,"column":1,"offset":3030},"end":{"line":77,"column":145,"offset":3178}}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Dispose memory","position":{"start":{"line":79,"column":5,"offset":3186},"end":{"line":79,"column":19,"offset":3200}}}],"position":{"start":{"line":79,"column":1,"offset":3182},"end":{"line":79,"column":19,"offset":3200}}},{"type":"paragraph","children":[{"type":"text","value":"‚úå\r\nNow let's create a function that removes all the memory consumed by IFC.js. There are 2 things to keep in mind:","position":{"start":{"line":81,"column":1,"offset":3204},"end":{"line":82,"column":112,"offset":3318}}}],"position":{"start":{"line":81,"column":1,"offset":3204},"end":{"line":82,"column":112,"offset":3318}}},{"type":"list","ordered":false,"start":null,"spread":true,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"If we have specified the ","position":{"start":{"line":84,"column":3,"offset":3324},"end":{"line":84,"column":28,"offset":3349}}},{"type":"strong","children":[{"type":"text","value":"path to the WASM files","position":{"start":{"line":84,"column":30,"offset":3351},"end":{"line":84,"column":52,"offset":3373}}}],"position":{"start":{"line":84,"column":28,"offset":3349},"end":{"line":84,"column":54,"offset":3375}}},{"type":"text","value":" previously, we will have to do it again in the new instance of web-ifc-three.","position":{"start":{"line":84,"column":54,"offset":3375},"end":{"line":84,"column":132,"offset":3453}}}],"position":{"start":{"line":84,"column":3,"offset":3324},"end":{"line":84,"column":132,"offset":3453}}}],"position":{"start":{"line":84,"column":1,"offset":3322},"end":{"line":84,"column":132,"offset":3453}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"This one is important: if we have stored a reference to the loaded IFC models in an array, an object or a class, ","position":{"start":{"line":86,"column":3,"offset":3459},"end":{"line":86,"column":116,"offset":3572}}},{"type":"strong","children":[{"type":"text","value":"we have to delete them manually","position":{"start":{"line":86,"column":118,"offset":3574},"end":{"line":86,"column":149,"offset":3605}}}],"position":{"start":{"line":86,"column":116,"offset":3572},"end":{"line":86,"column":151,"offset":3607}}},{"type":"text","value":". Otherwise, the memory will not be freed.","position":{"start":{"line":86,"column":151,"offset":3607},"end":{"line":86,"column":193,"offset":3649}}}],"position":{"start":{"line":86,"column":3,"offset":3459},"end":{"line":86,"column":193,"offset":3649}}}],"position":{"start":{"line":86,"column":1,"offset":3457},"end":{"line":86,"column":193,"offset":3649}}}],"position":{"start":{"line":84,"column":1,"offset":3322},"end":{"line":86,"column":193,"offset":3649}}},{"type":"code","lang":"js","meta":null,"value":"async function releaseMemory() {\r\n  // This releases all IFCLoader memory\r\n  await ifcLoader.ifcManager.dispose();\r\n  ifcLoader = null;\r\n  ifcLoader = new IFCLoader();\r\n\r\n  // If the wasm path was set before, we need to reset it\r\n  await ifcLoader.ifcManager.setWasmPath(\"../../../\");\r\n\r\n  // If IFC models are an array or object,\r\n  // you must release them there as well\r\n  // Otherwise, they won't be garbage collected\r\n  models.length = 0;\r\n}","position":{"start":{"line":88,"column":1,"offset":3653},"end":{"line":103,"column":4,"offset":4111}}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Set up simple GUI","position":{"start":{"line":105,"column":5,"offset":4119},"end":{"line":105,"column":22,"offset":4136}}}],"position":{"start":{"line":105,"column":1,"offset":4115},"end":{"line":105,"column":22,"offset":4136}}},{"type":"paragraph","children":[{"type":"text","value":"üíÖ\r\nFinally, we are going to create an HTML button and link it to the function we created earlier.","position":{"start":{"line":107,"column":1,"offset":4140},"end":{"line":108,"column":95,"offset":4238}}}],"position":{"start":{"line":107,"column":1,"offset":4140},"end":{"line":108,"column":95,"offset":4238}}},{"type":"code","lang":"html","meta":null,"value":"<input type=\"button\" id=\"memory-button\" value=\"Release memory\" />","position":{"start":{"line":110,"column":1,"offset":4242},"end":{"line":112,"column":4,"offset":4321}}},{"type":"code","lang":"js","meta":null,"value":"// Sets up memory disposal\r\nconst button = document.getElementById(\"memory-button\");\r\nbutton.addEventListener(`click`, () => releaseMemory());","position":{"start":{"line":114,"column":1,"offset":4325},"end":{"line":118,"column":4,"offset":4479}}},{"type":"paragraph","children":[{"type":"text","value":"üòé This is how the application looks like:","position":{"start":{"line":120,"column":1,"offset":4483},"end":{"line":120,"column":43,"offset":4525}}}],"position":{"start":{"line":120,"column":1,"offset":4483},"end":{"line":120,"column":43,"offset":4525}}},{"type":"mdxJsxFlowElement","name":"Scene","attributes":[{"type":"mdxJsxAttribute","name":"link","value":{"type":"mdxJsxAttributeValueExpression","value":"\r\n \"https://ifcjs.github.io/hello-world/examples/web-ifc-three/memory/index.html\"\r\n","data":{"estree":{"type":"Program","start":4545,"end":4633,"body":[{"type":"ExpressionStatement","expression":{"type":"Literal","start":4551,"end":4629,"loc":{"start":{"line":124,"column":4,"offset":4551},"end":{"line":124,"column":82,"offset":4629}},"value":"https://ifcjs.github.io/hello-world/examples/web-ifc-three/memory/index.html","raw":"\"https://ifcjs.github.io/hello-world/examples/web-ifc-three/memory/index.html\"","range":[4551,4629]},"start":4545,"end":4633,"loc":{"start":{"line":123,"column":8,"offset":4545},"end":{"line":125,"column":2,"offset":4633}},"range":[4545,4633]}],"sourceType":"module","comments":[],"loc":{"start":{"line":123,"column":8,"offset":4545},"end":{"line":125,"column":2,"offset":4633}},"range":[4545,4633]}}}}],"children":[],"position":{"start":{"line":122,"column":1,"offset":4529},"end":{"line":126,"column":3,"offset":4638}}},{"type":"paragraph","children":[{"type":"text","value":"Try loading a model and releasing the memory: you'll see it go back to normal. Beware that ","position":{"start":{"line":128,"column":1,"offset":4642},"end":{"line":128,"column":92,"offset":4733}}},{"type":"strong","children":[{"type":"text","value":"it can take some seconds","position":{"start":{"line":128,"column":94,"offset":4735},"end":{"line":128,"column":118,"offset":4759}}}],"position":{"start":{"line":128,"column":92,"offset":4733},"end":{"line":128,"column":120,"offset":4761}}},{"type":"text","value":", as the browser garbage collector takes some time. Alternatively, you can manually apply the garbage collector using the browser's developer tools.","position":{"start":{"line":128,"column":120,"offset":4761},"end":{"line":128,"column":268,"offset":4909}}}],"position":{"start":{"line":128,"column":1,"offset":4642},"end":{"line":128,"column":268,"offset":4909}}},{"type":"heading","depth":3,"children":[{"type":"text","value":"SPA","position":{"start":{"line":130,"column":5,"offset":4917},"end":{"line":130,"column":8,"offset":4920}}}],"position":{"start":{"line":130,"column":1,"offset":4913},"end":{"line":130,"column":8,"offset":4920}}},{"type":"paragraph","children":[{"type":"text","value":"üåà\r\nIt is very common to create ","position":{"start":{"line":132,"column":1,"offset":4924},"end":{"line":133,"column":29,"offset":4956}}},{"type":"strong","children":[{"type":"text","value":"SPA","position":{"start":{"line":133,"column":31,"offset":4958},"end":{"line":133,"column":34,"offset":4961}}}],"position":{"start":{"line":133,"column":29,"offset":4956},"end":{"line":133,"column":36,"offset":4963}}},{"type":"text","value":" or ","position":{"start":{"line":133,"column":36,"offset":4963},"end":{"line":133,"column":40,"offset":4967}}},{"type":"strong","children":[{"type":"text","value":"Single Page Applications","position":{"start":{"line":133,"column":42,"offset":4969},"end":{"line":133,"column":66,"offset":4993}}}],"position":{"start":{"line":133,"column":40,"offset":4967},"end":{"line":133,"column":68,"offset":4995}}},{"type":"text","value":" because they are more efficient and require less communication with the backend. Examples of tools to make these applications are ","position":{"start":{"line":133,"column":68,"offset":4995},"end":{"line":133,"column":199,"offset":5126}}},{"type":"strong","children":[{"type":"text","value":"React","position":{"start":{"line":133,"column":201,"offset":5128},"end":{"line":133,"column":206,"offset":5133}}}],"position":{"start":{"line":133,"column":199,"offset":5126},"end":{"line":133,"column":208,"offset":5135}}},{"type":"text","value":", ","position":{"start":{"line":133,"column":208,"offset":5135},"end":{"line":133,"column":210,"offset":5137}}},{"type":"strong","children":[{"type":"text","value":"Angular","position":{"start":{"line":133,"column":212,"offset":5139},"end":{"line":133,"column":219,"offset":5146}}}],"position":{"start":{"line":133,"column":210,"offset":5137},"end":{"line":133,"column":221,"offset":5148}}},{"type":"text","value":", ","position":{"start":{"line":133,"column":221,"offset":5148},"end":{"line":133,"column":223,"offset":5150}}},{"type":"strong","children":[{"type":"text","value":"Vue","position":{"start":{"line":133,"column":225,"offset":5152},"end":{"line":133,"column":228,"offset":5155}}}],"position":{"start":{"line":133,"column":223,"offset":5150},"end":{"line":133,"column":230,"offset":5157}}},{"type":"text","value":", etc.","position":{"start":{"line":133,"column":230,"offset":5157},"end":{"line":133,"column":236,"offset":5163}}}],"position":{"start":{"line":132,"column":1,"offset":4924},"end":{"line":133,"column":236,"offset":5163}}},{"type":"paragraph","children":[{"type":"text","value":"üë∂üë¥\r\nIn many cases ","position":{"start":{"line":135,"column":1,"offset":5167},"end":{"line":136,"column":15,"offset":5187}}},{"type":"strong","children":[{"type":"text","value":"these tools manage the lifecycle of the application components automatically","position":{"start":{"line":136,"column":17,"offset":5189},"end":{"line":136,"column":93,"offset":5265}}}],"position":{"start":{"line":136,"column":15,"offset":5187},"end":{"line":136,"column":95,"offset":5267}}},{"type":"text","value":". For example, when the user closes the 3d view, the HTML element containing the view is automatically destroyed.","position":{"start":{"line":136,"column":95,"offset":5267},"end":{"line":136,"column":208,"offset":5380}}}],"position":{"start":{"line":135,"column":1,"offset":5167},"end":{"line":136,"column":208,"offset":5380}}},{"type":"paragraph","children":[{"type":"text","value":"üößüößüöß\r\nTo avoid memory leaks, it will be necessary to ","position":{"start":{"line":138,"column":1,"offset":5384},"end":{"line":139,"column":48,"offset":5439}}},{"type":"strong","children":[{"type":"text","value":"free the application memory as seen in this tutorial each time the component containing the 3D view is destroyed","position":{"start":{"line":139,"column":50,"offset":5441},"end":{"line":139,"column":162,"offset":5553}}}],"position":{"start":{"line":139,"column":48,"offset":5439},"end":{"line":139,"column":164,"offset":5555}}},{"type":"text","value":". In many cases there are hooks or similar mechanisms to execute this logic automatically each time the component is destroyed.","position":{"start":{"line":139,"column":164,"offset":5555},"end":{"line":139,"column":291,"offset":5682}}}],"position":{"start":{"line":138,"column":1,"offset":5384},"end":{"line":139,"column":291,"offset":5682}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Next steps","position":{"start":{"line":141,"column":4,"offset":5689},"end":{"line":141,"column":14,"offset":5699}}}],"position":{"start":{"line":141,"column":1,"offset":5686},"end":{"line":141,"column":14,"offset":5699}}},{"type":"paragraph","children":[{"type":"text","value":"üéâüéâüéâ\r\nCongratulations! You now know how to manage the memory of the BIM applications you create with IFC.js, so your applications will be 100% free of memory leaks.","position":{"start":{"line":143,"column":1,"offset":5703},"end":{"line":144,"column":159,"offset":5869}}}],"position":{"start":{"line":143,"column":1,"offset":5703},"end":{"line":144,"column":159,"offset":5869}}},{"type":"paragraph","children":[{"type":"text","value":"üí™\r\nNext we are going to look at some advanced model loading tools, such as multithreading and load process event.","position":{"start":{"line":146,"column":1,"offset":5873},"end":{"line":147,"column":111,"offset":5987}}}],"position":{"start":{"line":146,"column":1,"offset":5873},"end":{"line":147,"column":111,"offset":5987}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":148,"column":1,"offset":5989}}}