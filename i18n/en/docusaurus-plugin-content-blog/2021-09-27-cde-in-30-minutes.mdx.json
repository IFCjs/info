["*All the big companies are selling their CDE. Why don't YOU make your own CDE?*\n","<img src={require(\"@site/static/img/blog/2021-09-27/lego.jpg\").default} alt=\"Lego image\"></img>","## But wait, what is a CDE?\n","ğŸ“¦\r\nInformally speaking, **CDE** is nothing more than a place where the information of a construction project is centralised and accesible through internet.\n","ğŸ”§ğŸ”¨ CDEs can have all the functionalities of traditional BIM applications: 3D\r\nviewers, reading and editing data, energy simulations, automatic measurements\r\nand budgets, etc.\n","ï¸\n","ğŸŒğŸŒğŸŒ\r\nHowever, they have a fundamental advantage: they are **on the web**, and that means they are accessible from anywhere and from any device without having to install anything.\n","## Ok, but why would I want a CDE?\n","ğŸ’¸\r\nWell, the truth is that right now, CDEs are the new black. **Almost every major company in the industry is building a CDE** and selling them to their customers at exorbitant prices.\n","ğŸƒâ€â™€ï¸ğŸƒâ€â™‚ï¸ğŸƒâ€â™€ï¸\r\nWith internet getting faster and better, there will come a day when desktop applications as we know them will lose relevance, and a large part of our tasks will be performed in web applications or server applications. In other words, **CDEs are the future**, and right now there is a big race to build the best one.\n","## I get it, CDEs rock. But I will never be able to develop one myself\n","ğŸ‘©â€ğŸ«\r\nWrong! The biggest beneficiary of you thinking you can't do BIM solutions is the current BIM vendors. At IFC.js we wanted to bust that myth and make a simple CDE from scratch to show that **starting to develop BIM applications is not that difficult**.\n","â˜\r\nObviously, this tutorial is a minimal example. But from the simple CDE of this tutorial to the CDEs of large companies, there is not as much distance as it might seem. **Enough chit-chat, let's get on with it!**\n","## CDE design\n","### Strategy\n","â³\r\nWe only have **half an hour** to do this CDE, so we have to choose carefully how to do it in order not to waste any time. First things first: we need **a place to store project documentation**. Do you know of an existing tool that allows us to do that? We have thought of **Google Drive**!\n","ğŸ’ª Google Drive has a lot of power: we can control read and write access to\r\nfiles, version control, an open API... In short, it has many of the things\r\nthat BIM software companies charge you for, but totally free.\n","ï¸\n","ğŸ›‘\r\nHowever, Google Drive has a fundamental limitation: it does not have a 3D viewer and does not allow easy access to data in BIM models (e.g. IFC models).\n","ğŸ¤\r\n**This is where IFC.js comes in**, allowing us to build BIM applications directly on the web. Combining the storage and permissions power of google drive with the 3d and data reading and editing capabilities of IFC.js, we could build our basic CDE in 30 minutes. Here's how:\n","### Architecture\n","ğŸ¤·â€â™€ï¸\r\n**How to connect** IFC.js and google drive to be able to use both as a CDE? Our design proposal is as follows. It may look complicated, but it's actually very very simple.\n","<img src={require(\"@site/static/img/blog/2021-09-27/schema.jpg\").default} alt=\"Schema explaining the concept of the CDE\"></img>","ğŸ \r\nFirst we are going to create an **3D BIM web application that is able to download files from google drive**. Specifically, it will download the file from google drive whose ID it finds in its URL parameter. For example, if your URL is `https://.../?id=123&name=TEST.ifc`, it will download the file whose `ID` is `123` from the google account of the user who is logged into the app.\n","ğŸŒ\r\nThen we are going to create a [google chrome extension](https://developer.chrome.com/docs/extensions/) that is going to do three things:\n","*   **Read the name of the HTML element** that the user clicks on via web scraping.\n\n*   **Find out the ID of that element** using the google drive API.\n\n*   **Create a menu that allows the user to open the URL with the IFC.js web application**. In addition, you are going to add two url parameters: the name and the id of the file.\n","In short: a google chrome extension gets the name of a file when the user\r\nclicks on it and opens a web app that knows how to download files by their ID.\r\nThat's all.\n","ï¸\n","### IFC.js app\n","#### BIM app\n","ğŸ¢\r\nThanks to IFC.js, **this is the easiest part**. Specifically, we are going to create it with [web-ifc-viewer](https://github.com/IFCjs/web-ifc-viewer), which allows to make BIM applications in 50 lines of code. You can find all the code [here](https://github.com/IFCjs/hello-world/tree/main/examples/web-ifc-viewer/google-drive-viewer).\n","ğŸ˜‰\r\nYes, you read that right: **a full 3D BIM app in 50 lines**. And it includes functionalities such as section drawings and 3D dimensions.\n","ğŸ¨\r\nMake sure you create the necessary HTML and CSS to give the viewer the look and feel you want.\n","#### Google Drive API\n","ğŸ”’ğŸ”’ğŸ”’\r\nWell, we have a BIM viewer, but for now it can't download anything from the **Google Drive API**. However, that's easy: just follow these steps from the [official documentation](https://developers.google.com/drive/api/v3/quickstart/js) and copy and paste the JavaScript code to be able to access the API.\n","ğŸ”‘ğŸ”‘ğŸ”‘ Following the google guide, you'll need to create a new Google Cloud\r\nproject to get your own CLIENT\\_ID and API\\_KEY; they are just two texts that\r\nyou must have for google to know who you are. In other words, you can't use\r\nthe keys we have to access to your drive!\n","ï¸\n","ğŸ“‹\r\nIf you take a look at the code we have posted, you will see that **we have copied and pasted almost all of the code** from the [google example](https://developers.google.com/drive/api/v3/quickstart/js). The only thing we have added is the following, which simply gets the ID of the file from the URL of the web application and downloads it from google drive:\n","ğŸ‰ğŸ‰ Congratulations! You have just built a BIM application capable of downloading files from Google Drive. Now all that remains is the last part: creating the Google Chrome extension.\n","### Chrome extension\n","Now we are going to make a Google Chrome extension so that the **user can select the files they want to open**. If you've never done this before, it may sound intimidating, but it's actually very simple. You can find the finished result [here](https://github.com/IFCjs/hello-world/tree/main/examples/extensions/Drive-CDE).\n","ğŸ”‘ğŸ”‘ğŸ”‘ Following the google guide, you'll need to create a new Google Cloud\r\nproject to get your own CLIENT\\_ID and API\\_KEY; they are just two texts that\r\nyou must have for google to know who you are. In other words, you can't use\r\nthe keys we have to access to your drive!{\" \"}\n","<a href=\"https://developers.google.com/drive/api/v3/about-sdk#create_and_open_files_directly_from_the_drive_ui\">\n  Have a look here for more details\n</a>\n",".\n","ï¸\n","ğŸ‘£\r\nThere are many [step-by-step guides](https://dev.to/anobjectisa/how-to-build-a-chrome-extension-new-manifest-v3-5edk) on the internet, but we recommend that you take the code from our repository, study it and play with it to see how it works.\n","ğŸ§±\r\nThere are really only 2 important files:\n","*   [background.js](https://github.com/IFCjs/hello-world/tree/main/examples/extensions/Drive-CDE/background.js): controls the events of the page, like when the user clicks on something, but doesn't have access to the page content.\n\n*   [foreground.js](https://github.com/IFCjs/hello-world/tree/main/examples/extensions/Drive-CDE/foreground.js): has access to the page content, but not to the events.\n","ğŸ‘¬\r\nSo, as you can imagine, both files have to communicate with each other in order to do what we want. As you can see in the code, they do it with a simple message system.\n","ğŸ‘©â€ğŸ«\r\nIn the repository you will find step-by-step comments on what does what. In total, there are less than 100 lines of relevant code: everything else is copied and pasted.\n","### All toguether!\n","ğŸ”¥ğŸ”¥ğŸ”¥\r\nThis is how our 30 minutes CDE looks:\n","## Conclusion\n","ğŸ†\r\nCongratulations! You have just created **your first CDE**. It may not seem much, but think of all its functionalities: file storage, permissions and version control, 3d view, access to properties, 3d measurements, section planes...\n","ğŸš€ğŸš€ğŸš€\r\nIf we have done this in such a short time and using Google Drive, can you imagine what is possible to build with IFC.js and other technologies such as **databases** or **servers?** Don't worry, we'll be making tutorials on all that and more!\n"]